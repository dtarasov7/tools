Нарушения зоны доступности

Сбои в работе Availability Zone редки, но случаются. В следующей таблице перечислены различные конфигурации Multi-AZ и поведение во время сбоя. Последняя строка в таблице относится к Multi-AZ с режимом ожидания, в то время как все остальные строки содержат конфигурации, которые применяются только к Multi-AZ без режима ожидания.

Количество зон доступности в регионе	Количество выбранных вами зон доступности	Количество выделенных главных узлов	Поведение, если в одной зоне доступности произошел сбой
2 или больше	2	0	
Время простоя. Ваш кластер теряет половину своих узлов данных и должен заменить по крайней мере один в оставшейся зоне доступности, прежде чем он сможет выбрать главного.

2	2	3	
Вероятность простоя 50/50. Служба OpenSearch распределяет два выделенных главных узла в одну зону доступности и один в другую:

Если в зоне доступности с одним выделенным главным узлом произойдет сбой, два выделенных главных узла в оставшейся зоне доступности могут выбрать главного.

Если в зоне доступности с двумя выделенными главными узлами возникнет сбой, кластер будет недоступен до тех пор, пока не восстановится оставшаяся зона доступности.

3 или больше	2	3	
Никаких простоев. Служба OpenSearch автоматически распределяет выделенные главные узлы по трем зонам доступности, поэтому оставшиеся два выделенных главных узла могут выбрать главный.

3 или больше	3	0	
Никаких простоев. Примерно две трети ваших узлов данных по-прежнему доступны для выбора мастера.

3 или больше	3	3	
Никаких простоев. Оставшиеся два выделенных главных узла могут выбрать главного.

Во всех конфигурациях, независимо от причины, отказы узлов могут привести к тому, что оставшиеся узлы данных кластера будут испытывать период повышенной нагрузки, в то время как служба OpenSearch автоматически настраивает новые узлы для замены отсутствующих.

Например, в случае нарушения Зоны доступности в конфигурации из трех зон, две трети узлов данных должны обработать столько же запросов к кластеру. По мере обработки этих запросов оставшиеся узлы также реплицируют шарды на новые узлы по мере их выхода в сеть, что может еще больше повлиять на производительность. Если доступность имеет решающее значение для вашей рабочей нагрузки, рассмотрите возможность добавления ресурсов в кластер, чтобы устранить эту проблему.